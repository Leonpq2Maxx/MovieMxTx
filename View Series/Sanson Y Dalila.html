<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>MovieTx - Reproductor De Serie</title>
<!-- Responsive viewport -->
<meta content='width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0' name='viewport'/>
<link rel="stylesheet" href="https://cdn.plyr.io/3.6.12/plyr.css"/>

<style>
  .container .main-video{background:#000000;border-radius:5px;padding:0px;}
  .container .main-video video{width:100%;border-radius:5px;}
  .container .main-video .title{
  color:#fff;font-size:23px;padding-top:15px;padding-bottom:15px;}
    .container .video-list{
  background:#151515;border-radius:5px;height:317px;overflow-y:scroll;}
  .container .video-list::-webkit-scrollbar{
  width:7px;}
  .container .video-list::-webkit-scrollbar-track{
  background:#000;border-radius:50px;}
  .container .video-list::-webkit-scrollbar-thumb{
  background:#00a7ad;border-radius:50px;}
  .container .video-list .vid video{
  width:100px;border-radius:5px;}
  .container .video-list .vid{
  background:#000;display:flex;align-items:center;gap:15px;border-radius:5px;margin:10px;padding:10px;border:1px solid rgba(0,0,0,.1);cursor:pointer;}
  .container .video-list .vid:hover{
  background:#000;}
  .container .video-list .vid.active{
  background:#00a7ad;}
  .container .video-list .vid.active .title{
  color:#ff0000;}
  .container .video-list .vid .title{
  color:#fff;font-size:17px;}
    :root {
      --plyr-color-main: #ff0000;
      --plyr-video-control-color: #0022ff;
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      outline: none;
      -webkit-tap-highlight-color: transparent;
      user-select: none;
    }
    body {
      background-color: #000;
      font-family: 'PT Sans', sans-serif;
      color: #fff;
    }
    .player video {
      width: 100%;
      height: auto;
      border-radius: 8px;
    }
    .info {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
      justify-content: center;
      padding: 10px;
      border: 1px solid rgba(16, 235, 255, 0.461);
      border-radius: 10px;
      margin: 10px;
      font-size: 14px;
    }
    .info i {
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .hd-tag {
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .hd-tag svg {
      border-radius: 4px;
    }
    .titulo, .sinopsis {
      padding: 10px;
    }
    .titulo h3, .titulo h4, .sinopsis h4 {
      font-family: 'Kanit', sans-serif;
      margin-bottom: 5px;
    }
    .recomendaciones {
      padding: 10px;
    }
    .series-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 15px;
      text-align: center;
    }
    .serie {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-decoration: none;
      color: white;
    }
    .serie img {
      width: 100%;
      max-width: 150px;
      border-radius: 10px;
    }
    .serie p {
      margin-top: 5px;
    }

    html { font-size: 100%; }
    body { font-size: 1rem; }
    h1 { font-size: 2rem; }
    h2 { font-size: 1.5rem; }
    h3, h4 { font-size: 1.2rem; }

    @media screen and (max-width: 768px) {
      body { font-size: 1.05rem; }
      h1 { font-size: 1.5rem; }
      h2 { font-size: 1.3rem; }
      h3, h4 { font-size: 1.1rem; }
      .info, .sinopsis p, .serie p {
        font-size: 1rem !important;
      }
    }

    @media screen and (max-width: 480px) {
      body { font-size: 1.1rem; }
      h1 { font-size: 1.4rem; }
      h2 { font-size: 1.2rem; }
      h3, h4 { font-size: 1rem; }
    }

    body, p, h1, h2, h3, h4, h5, h6, span, a, .titulo, .sinopsis, .recomendaciones, .serie {
      font-style: italic;
    }

    .info, .info *, .info span, .info i {
      font-style: normal !important;
    }

    #resume-msg {
      display: none;
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.85);
      padding: 10px 20px;
      color: #0f0;
      border-radius: 8px;
      z-index: 9999;
      font-weight: bold;
      max-width: 90%;
      font-size: 1rem;
      text-align: center;
      box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
      opacity: 0;
      transition: opacity 0.8s ease;
    }

    #resume-msg.visible {
      display: block;
      opacity: 1;
    }

    @media (max-width: 480px) {
      #resume-msg {
        font-size: 0.9rem;
        padding: 8px 16px;
      }
    }
  </style>
<link rel="stylesheet" href="" />
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
  <link href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" rel="stylesheet">
</head>
<body>
<div class="container">
<div class="main-video">
<div class="video">
<video class='js-player' poster="https://image.tmdb.org/t/p/w780/c9q9vNrDTAZNpfvgLKxVRNX9awH.jpg" controls muted preload="metadata"> <!--Aca te dejo la pagina para agregar el fondo https://www.themoviedb.org-->
<source src="https://www.udrop.com/file/6goa/1x1" type="application/x-mpegURL">
</video>
<!--<video src="" poster="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR3r48KQZbrv_w2zeTpEMqrIE0BysJMnmdydw&usqp=CAU" controls muted autoplay></video>-->
<div id="resume-msg">‚úÖ Reanudando donde lo dejaste: Sans√≥n Y Dalilar</div>

  <div class="info">
    <i class="fal fa-calendar-alt"></i><span>2011</span> <!-- A√ëO DE ESTRENO DE LA SERIE -->
    <i class="fal fa-clock"></i><span>T1</span> <!-- LA CANTIDAD DE TEMPORADAS QUE TIENE EJEMPLO "T1 (SI TIENE UNA TEMPORADAS)" SI TIENE VARIAS AGREGAR "T4" SERIAN TEMPORADA 4-->
    <i class="fal fa-thumbs-up"></i><span>71%</span> <!-- LA CALIFICACION DE LA SERIE -->
    <div class="hd-tag">
      <svg width="22" height="22" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <rect width="24" height="24" rx="4" fill="white" />
        <text x="4" y="17" fill="black" font-size="12" font-family="Arial, sans-serif" font-style="italic" font-weight="bold">HD</text>
      </svg>
      <span>1080P</span>
    </div>
    <span>üá≤üáΩ</span>
  </div>

  <div class="titulo">
    <h3>Sans√≥n Y Dalila</h3>
  </div>

  <!-- Selector de Temporadas y Botones de Episodios -->
<div style="display: flex; align-items: center; justify-content: space-between; padding: 10px; flex-wrap: wrap;">
  <div>
    <select id="temporada-select" style="background: #1c1c1c; color: white; font-size: 1rem; padding: 5px 10px; border-radius: 5px; border: 1px solid #333;">
      <option value="1" selected>Temporada 1</option>
    </select>
  </div>
  <div id="episodio-count" style="color: #bbb; font-size: 0.95rem;">10 Cap√≠tulos</div>
</div>

<!-- Botones de episodios -->
<div id="episodios" style="
  display: flex;
  flex-wrap: nowrap;
  gap: 10px;
  padding: 10px;
  overflow-x: auto;
  white-space: nowrap;
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
"></div>

<script>
const episodiosData = {
  1: [
    { titulo: "Episodio 1 - El Nacimiento De Un Salvador", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_0j4615df/format/applehttp/protocol/https/flavorIds/1_grw37a88,1_18dilov4,1_qqcdcmcp,1_1rhok5uv,1_u43j9f2i,1_b0ctmask,1_ejj2rth5,1_lm9cc1tp/preferredBitrate/1500/maxBitrate/10000/clipTo/3038000/a.m3u8" },
    { titulo: "Episodio 2 - Sans√≥n Busca Nuevos Rumbos", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_i61og8kg/format/applehttp/protocol/https/flavorIds/1_0kdhagbh,1_mesvsl3g,1_vudrjbpi,1_t5sqp4gq,1_0omen9bc,1_nr11v1jt,1_uuk5hxir,1_0lm1be2d/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
    { titulo: "Episodio 3 - El Cruel Castigo", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_0hh046py/format/applehttp/protocol/https/flavorIds/1_uy8z1wod,1_dk45cqx7,1_1jzk4hrv,1_tbswfni6,1_nxaqglx0,1_6h2g9sn7,1_p892gvj5,1_blwsfaqz/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
    { titulo: "Episodio 4 - La Boda De Sans√≥n", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_peeec3s3/format/applehttp/protocol/https/flavorIds/1_6wrr5mll,1_0k8g2bhg,1_ayywbnvv,1_tt9ctcx0,1_xoznokx7,1_2fweqsb8,1_chujtv4u,1_uyfqnaio/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
    { titulo: "Episodio 5 - Enigma", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_cohzwfhu/format/applehttp/protocol/https/flavorIds/1_2a70eo3q,1_goemaeo9,1_tcadv7jy,1_rei8ngdq,1_1ivk11de,1_3t75al56,1_jxmnwsp6,1_pxr7hwro/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
    { titulo: "Episodio 6 - Traicion", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_o0j9is24/format/applehttp/protocol/https/flavorIds/1_8p05m0m2,1_331h7uk0,1_wiewpv4q,1_0txqdw2a,1_3wwxb32f,1_bx4seads,1_3ewgb063,1_nlo3tzre/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
    { titulo: "Episodio 7 - Las Perdidas Dolorosas", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_9amaqy5k/format/applehttp/protocol/https/flavorIds/1_t8s0xg5m,1_n7wgez5c,1_3xrdxkq8,1_5or2k3d6,1_z2dp2xql,1_9wen9mjw,1_2h42nt7x,1_4luwoz69/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
    { titulo: "Episodio 8 - Juez Y Justicia", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_r8miyt5d/format/applehttp/protocol/https/flavorIds/1_kzfc1gi8,1_p35ectbg,1_63ww4rjw,1_3y22u0gs,1_gk3ha6wy,1_gdw4f8un,1_t31m1x7a,1_1etvcmai/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
    { titulo: "Episodio 9 - Despedida", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_c3dxwhtf/format/applehttp/protocol/https/flavorIds/1_z74mac5r,1_6rmigw9o,1_ytnownsi,1_6diry76o,1_77lxpige,1_yis03a3d,1_yk2screj,1_1y9ps83g/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
    { titulo: "Episodio 10 - Enncontrado", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_pomol7bh/format/applehttp/protocol/https/flavorIds/1_vr7k76mn,1_2sllqu35,1_z3fo2gut,1_mg0lllw9,1_ypeap1w6,1_qtof4g62,1_qqqba2uv,1_wkqkza6b/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
    { titulo: "Episodio 11 - Demostrando Su Poder", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_igtfo5ek/format/applehttp/protocol/https/flavorIds/1_5ojca388,1_rru9dfrc,1_j90lvdtv,1_o24kp1wf,1_5zp11a6t,1_zs99pojd,1_msmtmowv,1_2mi2wh79/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
    { titulo: "Episodio 12 - Sans√≥n Y Dalila", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_jz75dysu/format/applehttp/protocol/https/flavorIds/1_repaangm,1_9vv5krny,1_fs2blw0t,1_b6yxocjr,1_pgdxu8mw,1_5w9t6fla,1_9nt8u5wo,1_g8x9y37q/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
    { titulo: "Episodio 13 - Encarada", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_8b7ditvi/format/applehttp/protocol/https/flavorIds/1_i7qz7r9d,1_3ldswmjn,1_azsmstvy,1_q9mb28el,1_he5d65pl,1_roqzq3cj,1_aypffo94,1_j5rfucqn/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
    { titulo: "Episodio 14 - La Defensa Del Trono", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_hezhbtiu/format/applehttp/protocol/https/flavorIds/1_6t12t2lo,1_besuhuf4,1_dzlbbhbz,1_wb07itlf,1_4sfrwsti,1_vgpht9ob,1_ex3lfyyo,1_yb39ajsy/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
    { titulo: "Episodio 15 - Encarcelada", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_2b6pfh5t/format/applehttp/protocol/https/flavorIds/1_9egd82g8,1_uu7fzvfz,1_pgaj0ozu,1_cmygcdn0,1_mdf81p7k,1_tx6ldie8,1_yklgmgai,1_iyc2cjhi/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
    { titulo: "Episodio 16 - Enga√±o", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_ijsvibyr/format/applehttp/protocol/https/flavorIds/1_5ei1uaci,1_vflvg1zd,1_4cs8xz7y,1_u0674i1j,1_rwdhajs0,1_mnfooca7,1_ku31wqth,1_5qgi663o/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
    { titulo: "Episodio 17 - Descubierta", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_k0b3x23n/format/applehttp/protocol/https/flavorIds/1_tl6ob7tu,1_g6x3vxil,1_x9xyob80,1_o5abhkmm,1_wu1rwfn3,1_ozboja4v,1_wa10tnzw,1_2h3nliy3/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
    { titulo: "Episodio 18 - La Traicion", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_1ddk7a11/format/applehttp/protocol/https/flavorIds/1_nubf1wuv,1_h0ostjnr,1_x1fxaws6,1_a5y6ljzj,1_6cwx0zox,1_k34gij20,1_k165prgs,1_flag126d/preferredBitrate/1500/maxBitrate/10000/a.m3u8" }
    // Agrega m√°s si tienes
  ]
};

const temporadaSelect = document.getElementById("temporada-select");
const episodiosContainer = document.getElementById("episodios");
const episodioCount = document.getElementById("episodio-count");
const mainVideo = document.querySelector('.main-video video');
const titleDiv = document.querySelector('.main-video .title');

function renderEpisodios(temporada) {
  episodiosContainer.innerHTML = "";
  
  const episodios = episodiosData[temporada] || [];
  const yearSpan = document.querySelector('.info span');
  const yearBySeason = { 1: '2011' };
  if (yearSpan) yearSpan.textContent = yearBySeason[temporada] || '0000';

  episodioCount.textContent = `${episodios.length} Cap√≠tulos`;

  episodios.forEach((ep, index) => {
    const btn = document.createElement("button");
    btn.textContent = index + 1;
    btn.style.cssText = `
      width: 40px; height: 40px;
      background: #222; border: none; border-radius: 5px;
      color: #ccc; font-size: 1rem; cursor: pointer;
    `;
    btn.addEventListener("click", () => {
      mainVideo.setAttribute("src", ep.src);
      mainVideo.play();
      if (titleDiv) {
        titleDiv.innerHTML = ep.titulo;
      }
    });
    episodiosContainer.appendChild(btn);
  });

  // Marcar autom√°ticamente el primer episodio
  const firstBtn = document.querySelector('#episodios button');
  if (firstBtn) {
    firstBtn.classList.add('active');
    firstBtn.style.background = 'red';
    firstBtn.style.color = '#fff';
  }

}


// Inicializar con la temporada por defecto
renderEpisodios(temporadaSelect.value);

// Cambiar temporada
temporadaSelect.addEventListener("change", () => {
  renderEpisodios(temporadaSelect.value);
});
</script>

<script>
let currentEpisodeIndex = 0;

function renderEpisodios(temporada) {
  episodiosContainer.innerHTML = "";
  
  const episodios = episodiosData[temporada] || [];
  const yearSpan = document.querySelector('.info span');
  const yearBySeason = { 1: '2011' };
  if (yearSpan) yearSpan.textContent = yearBySeason[temporada] || '0000';

  episodioCount.textContent = `${episodios.length} Cap√≠tulos`;

  episodios.forEach((ep, index) => {
    const btn = document.createElement("button");
    btn.textContent = index + 1;
    btn.style.cssText = `
      width: 40px; height: 40px;
      background: #222; border: none; border-radius: 5px;
      color: #ccc; font-size: 1rem; cursor: pointer;
    `;
    btn.addEventListener("click", () => {
      playEpisode(ep.src, ep.titulo, index);
    });
    episodiosContainer.appendChild(btn);
  });

  // Marcar autom√°ticamente el primer episodio
  const firstBtn = document.querySelector('#episodios button');
  if (firstBtn) {
    firstBtn.classList.add('active');
    firstBtn.style.background = 'red';
    firstBtn.style.color = '#fff';
  }

}

function playEpisode(src, titulo, index) {
  currentEpisodeIndex = index;
  mainVideo.src = src;
  mainVideo.load(); // prepara el video sin reproducir //
  mainVideo.pause();
mainVideo.currentTime = mainVideo.currentTime || 0; // aseg√∫rate que se mantenga en el tiempo guardado si existe
  mainVideo.play(); // forzar reproducci√≥n autom√°tica
  if (titleDiv) titleDiv.innerHTML = titulo;

  // Desmarcar todos los botones
  const buttons = document.querySelectorAll("#episodios button");
  buttons.forEach(btn => {
    btn.classList.remove("active");
    btn.style.background = "#222";
    btn.style.color = "#ccc";
  });

  // Marcar el bot√≥n actual en rojo
  buttons[index]?.classList.add("active");
  buttons[index].style.background = "red";
  buttons[index].style.color = "#fff";

  // Reanudar si hay guardado
  const msg = document.getElementById("resume-msg");
  msg.textContent = `‚úÖ ${titulo}`;
  msg.classList.add("visible");
  setTimeout(() => msg.classList.remove("visible"), 3000);

  localStorage.setItem("ultimo_episodio", JSON.stringify({
  temporada: temporadaSelect.value,
  index: index
}));

}



// Guardar tiempo cada 5s
setInterval(() => {
  if (!mainVideo.paused && !mainVideo.ended) {
    localStorage.setItem(`resume_${temporadaSelect.value}_${currentEpisodeIndex}`, mainVideo.currentTime);
  }
}, 5000);


mainVideo.addEventListener("pause", () => {
  if (autoNextPlaying && !mainVideo.ended) {
    mainVideo.play();
    autoNextPlaying = false;
  }
});


// Auto-next al finalizar
mainVideo.addEventListener("ended", () => {
  mainVideo.currentTime = 0;
  const episodios = episodiosData[temporadaSelect.value] || [];
  if (currentEpisodeIndex + 1 < episodios.length) {
    const next = episodios[currentEpisodeIndex + 1];
    playEpisode(next.src, next.titulo, currentEpisodeIndex + 1);
  }
});

// Re-render al cambiar temporada
temporadaSelect.addEventListener("change", () => {
  // Detener y reiniciar el video
  mainVideo.pause();
  mainVideo.removeAttribute("src");
  mainVideo.load(); // reinicia el reproductor
});
// Limpiar t√≠tulo
  if (titleDiv) titleDiv.innerHTML = "Selecciona un episodio";
  // Limpiar botones marcados
  document.querySelectorAll("#episodios button").forEach(btn => {
    btn.classList.remove("active");
    btn.style.background = "#222";
    btn.style.color = "#ccc";
  });

  


// Inicial
const ultimo = JSON.parse(localStorage.getItem("ultimo_episodio") || "null");

if (ultimo && episodiosData[ultimo.temporada]) {
  temporadaSelect.value = ultimo.temporada;
  renderEpisodios(ultimo.temporada);
  const ep = episodiosData[ultimo.temporada][ultimo.index];
  if (ep) {
    currentEpisodeIndex = ultimo.index;
    mainVideo.src = ep.src;
    mainVideo.load(); // carga sin reproducir
    mainVideo.pause();
    if (titleDiv) titleDiv.innerHTML = ep.titulo;

    const buttons = document.querySelectorAll("#episodios button");
    buttons.forEach(btn => {
      btn.classList.remove("active");
      btn.style.background = "#222";
      btn.style.color = "#ccc";
    });
    buttons[ultimo.index]?.classList.add("active");
    buttons[ultimo.index].style.background = "red";
    buttons[ultimo.index].style.color = "#fff";

    const msg = document.getElementById("resume-msg");
    msg.textContent = `‚úÖ ${ep.titulo} cargado`;
    msg.classList.add("visible");
    setTimeout(() => msg.classList.remove("visible"), 3000);
  }
} else {
  renderEpisodios(temporadaSelect.value);
  const ep = episodiosData[temporadaSelect.value][0];
  mainVideo.src = ep.src;
  mainVideo.load();
  mainVideo.pause();
  if (titleDiv) titleDiv.innerHTML = ep.titulo;

  const buttons = document.querySelectorAll("#episodios button");
  buttons[0]?.classList.add("active");
  buttons[0].style.background = "red";
  buttons[0].style.color = "#fff";
}


</script>

<style>
  #episodios button {
    min-width: 40px;
    height: 40px;
    flex: 0 0 auto;
    scroll-snap-align: start;
  }
  #episodios button.active {
  background: red !important;
  color: white !important;
  #episodios button {
  scroll-snap-align: start;
  flex: 0 0 auto;
}
#episodios::-webkit-scrollbar {
  height: 6px;
}
#episodios::-webkit-scrollbar-thumb {
  background: #888;
  border-radius: 5px;
}
#episodios::-webkit-scrollbar-track {
  background: #111;
}
}

</style>

<br>
<div class="titulo">
  <h4>G√©nero: Drama, Acci√≥n, Aventura, Biblico</h4> <!--Aca va el genero de la serie-->
</div>


  <div class="sinopsis">
    <h4>Sinopsis:</h4><!--Aca va la sinopsis en el <p>Sinopsis</<p> que esta debajo-->
    <p>
      Sans√≥n nace como la promesa de ser el libertador del pueblo hebreo, quienes eran oprimidos y perseguidos. √âl es un hombre fuerte y valiente, que lucha contra muchos ej√©rcitos enemigos de su pueblo y animales salvajes. El pr√≠ncipe de Gaza, Inarus, se enfurec√≠a por cada victoria de Sans√≥n contra su ej√©rcito. Por eso decide usar a su cortesana favorita, Dalila, para que intente persuadir a Sans√≥n y as√≠ descubrir el secreto de su fuerza.
    </p>
  </div>
  <div style="text-align: center; margin-top: 15px;">
    <button id="btn-favorito" style="
      background: #ff4444;
      color: white;
      padding: 10px 16px;
      border: none;
      border-radius: 20px;
      font-size: 1rem;
      cursor: pointer;
    ">
      ‚≠ê Favoritos
    </button>
  </div>
  <br>

<br>
<div class="recomendaciones">
  <h4>Podr√≠a interesarte:</h4>
  <br>
  <div class="series-grid">
    <a href="#" class="serie">
      <img loading="lazy" src="https://raw.githubusercontent.com/Leonpq2Maxx/MovieTx/refs/heads/MovieTx/img%20poster/Invitaci%C3%B3n%20Primera%20Comuni%C3%B3n%20Acuarela%20Simple%20Verde%20y%20dorado.gif" alt=""> <!--Aca va las imagenes de las series solo debes de agregar la ultima parte despues de la "/" ej: (https://image.tmdb.org/t/p/original/qZJt1XlRVbQhGV7MtZnbiR6vxPh.jpg) solo debes agregar esto (qZJt1XlRVbQhGV7MtZnbiR6vxPh.jpg)-->
      <p>Nombre de serie</p>
    </a>
    <a href="#" class="serie">
      <img loading="lazy" src="https://raw.githubusercontent.com/Leonpq2Maxx/MovieTx/refs/heads/MovieTx/img%20poster/Invitaci%C3%B3n%20Primera%20Comuni%C3%B3n%20Acuarela%20Simple%20Verde%20y%20dorado.gif" alt="">
      <p>Nombre de serie</p>
    </a>
    <a href="#" class="serie">
      <img loading="lazy" src="https://raw.githubusercontent.com/Leonpq2Maxx/MovieTx/refs/heads/MovieTx/img%20poster/Invitaci%C3%B3n%20Primera%20Comuni%C3%B3n%20Acuarela%20Simple%20Verde%20y%20dorado.gif" alt="">
      <p>Nombre de serie</p>
    </a>
    <a href="#" class="serie">
      <img loading="lazy" src="https://raw.githubusercontent.com/Leonpq2Maxx/MovieTx/refs/heads/MovieTx/img%20poster/Invitaci%C3%B3n%20Primera%20Comuni%C3%B3n%20Acuarela%20Simple%20Verde%20y%20dorado.gif" alt="">
      <p>Nombre de serie</p>
    </a>
    <a href="#" class="serie">
      <img loading="lazy" src="https://raw.githubusercontent.com/Leonpq2Maxx/MovieTx/refs/heads/MovieTx/img%20poster/Invitaci%C3%B3n%20Primera%20Comuni%C3%B3n%20Acuarela%20Simple%20Verde%20y%20dorado.gif" alt="">
      <p>Nombre de serie</p>
    </a>
    <a href="#" class="serie">
      <img loading="lazy" src="https://raw.githubusercontent.com/Leonpq2Maxx/MovieTx/refs/heads/MovieTx/img%20poster/Invitaci%C3%B3n%20Primera%20Comuni%C3%B3n%20Acuarela%20Simple%20Verde%20y%20dorado.gif" alt="">
      <p>Nombre de serie</p>
    </a>
  </div>
</div>
<br>
<!-- Historial -->

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const serieTitulo = "Sans√≥n Y Dalila";
    const serieImagen = "https://image.tmdb.org/t/p/w300/3bdxncan9iyCtQkgy1NwILR6h9A.jpg"; //Aca va la ultima parte de la imagen como hice el ej de arriba se agrega despues de la barra. esta de esta forma para que la imagen carge mas rapido
    const archivoHTML = "Sanson Y Dalila.html"; // ‚úÖ Ruta relativa al historial
    const progresoTexto = "Actualizado"; // Puedes cambiarlo din√°micamente

    let historial = JSON.parse(localStorage.getItem('historial_usuarios') || '[]');
    const index = historial.findIndex(h => h.titulo === serieTitulo);

    if (index === -1) {
      historial.unshift({
        titulo: serieTitulo,
        imagen: serieImagen,
        progreso: progresoTexto,
        archivo: archivoHTML,
        tipo: "serie", // ‚úÖ ya est√°
        timestamp: Date.now() // ‚úÖ IMPORTANTE
      });
      if (historial.length > 20) historial.pop(); // Limita a 20
    } else {
      historial[index].progreso = progresoTexto;
      historial[index].timestamp = Date.now(); // ‚úÖ Actualiza orden
    }

    localStorage.setItem('historial_usuarios', JSON.stringify(historial));
  });
</script>

<!--Aca va el mensaje que se ha agregado al historial-->
  <div id="mensaje-confirmacion" style="
    display: none;
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.85);
    color: #fff;
    padding: 12px 24px;
    border-radius: 8px;
    font-size: 1rem;
    z-index: 9999;
    box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
    transition: opacity 0.5s ease;">
  </div>

  <script>
    function mostrarMensaje(texto) {
      const mensaje = document.getElementById('mensaje-confirmacion');
      mensaje.textContent = texto;
      mensaje.style.display = 'block';
      mensaje.style.opacity = '1';
      setTimeout(() => {
        mensaje.style.opacity = '0';
        setTimeout(() => mensaje.style.display = 'none', 500);
      }, 3000);
    }
  </script>


<!--PROBAR LUEGO SI FUNCIONA QUITANDOLO-->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const mainVideo = document.querySelector('.main-video video');
    const titleDiv = document.querySelector('.main-video .title');
    const temporadaSelect = document.getElementById('temporada-select');

    const serieTitulo = "Sanson y Dalila";
    const serieImagen = "https://image.tmdb.org/t/p/w300/3bdxncan9iyCtQkgy1NwILR6h9A.jpg";
    const archivoHTML = "Sanson Y Dalila.html";

    function guardarEnHistorial(epTitulo, temporada, episodioIndex) {
  let historial = JSON.parse(localStorage.getItem('historial_usuarios') || '[]');
  const registro = historial.find(h => h.titulo === serieTitulo);
  const progresoTexto = `T${temporada} ‚Ä¢ Episodio ${episodioIndex + 1} - ${epTitulo}`;

  if (!registro) {
    historial.unshift({
      titulo: serieTitulo,
      imagen: serieImagen,
      progreso: progresoTexto,
      archivo: archivoHTML,
      tipo: "serie", // ‚úÖ ya est√°
      timestamp: Date.now() // ‚úÖ se agrega timestamp al guardar
    });
    mostrarMensaje("üì∫ Agregado al historial");
  } else {
    registro.progreso = progresoTexto;
    registro.timestamp = Date.now(); // ‚úÖ actualiza el orden
  }

  localStorage.setItem('historial_usuarios', JSON.stringify(historial));
}


    function mostrarMensaje(texto) {
      let mensaje = document.getElementById('mensaje-confirmacion');
      if (!mensaje) {
        mensaje = document.createElement('div');
        mensaje.id = 'mensaje-confirmacion';
        mensaje.style.cssText = `
          position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
          background: rgba(0,0,0,0.85); color: #fff; padding: 12px 24px;
          border-radius: 8px; font-size: 1rem; z-index: 9999;
          box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
        `;
        document.body.appendChild(mensaje);
      }
      mensaje.textContent = texto;
      mensaje.style.display = 'block';
      mensaje.style.opacity = '1';
      setTimeout(() => {
        mensaje.style.opacity = '0';
        setTimeout(() => mensaje.style.display = 'none', 500);
      }, 3000);
    }

    window.guardarEnHistorial = guardarEnHistorial;

    mainVideo.addEventListener('play', () => {
      if (titleDiv?.innerText) {
        const temporada = temporadaSelect?.value || '1';
        const index = Array.from(document.querySelectorAll('#episodios button')).findIndex(btn => btn.classList.contains('active'));
        guardarEnHistorial(titleDiv.innerText, temporada, index);
      }
    });
  });
</script>
<!--FINAL ESTO ES NOMAS.......!-->


<!--animacion de favorito-->

<style>
  /* ACA ES LA ANIMACION DE FAVORITOS */
    @keyframes pop {
      0%   { transform: scale(1); }
      50%  { transform: scale(1.3); }
      100% { transform: scale(1); }
    }
    
    #btn-favorito.animado {
      animation: pop 0.3s ease;
    }
</style>


<!-- FAVORITOS -->
<script>
document.getElementById('btn-favorito').addEventListener('click', () => {
  const nuevaPelicula = {
  titulo: "Sanson y Dalila",
  imagen: "https://image.tmdb.org/t/p/w300/3bdxncan9iyCtQkgy1NwILR6h9A.jpg",
  genero: "Drama", // o "Serie", "Crimen/Serie", etc.
  archivo: "Sanson Y Dalila.html",
  tipo: "serie", // ‚úÖ identifica si es "serie" o "pelicula"
  timestamp: Date.now() // opcional: para ordenar por fecha
  };

  /* animacion de favoritos */
      const btn = document.getElementById('btn-favorito');
      btn.classList.add('animado');
      setTimeout(() => btn.classList.remove('animado'), 300);
      mostrarMensaje("‚≠ê Agregado a Favoritos");
      
  let favoritos = JSON.parse(localStorage.getItem('favoritos_detalles') || '[]');
  if (!favoritos.some(f => f.titulo === nuevaPelicula.titulo)) {
    favoritos.push(nuevaPelicula);
    localStorage.setItem('favoritos_detalles', JSON.stringify(favoritos));
  }
  window.location.href = "../View Peliculas/favoritos.html";
});
</script>


<!-- A√±adir Botones para .js-player: Reinicio al inicio (fa-step-backward), Retroceso (fa-undo) y Avance (fa-forward) -->
<script>
document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll('.js-player').forEach(video => {
    const controls = video.closest('.main-video')?.querySelector('.plyr__controls');
    if (controls && !controls.querySelector('#plyr-restart')) {
      // 1Ô∏è‚É£ Crear bot√≥n de Reinicio al inicio (#plyr-restart) al EXTREMO IZQUIERDO
      const restartBtn = document.createElement("button");
      restartBtn.className = "plyr__control";
      restartBtn.id = "plyr-restart";
      restartBtn.innerHTML = '<i class="fas fa-undo"></i><span class="plyr__sr-only">Reiniciar al inicio</span>';
      restartBtn.title = "Reiniciar al inicio (0s)";
      restartBtn.addEventListener("click", () => {
        video.currentTime = 0;
      });
      controls.insertBefore(restartBtn, controls.firstChild);

      // 2Ô∏è‚É£ Crear bot√≥n de Retroceso (#plyr-rewind) junto al de Reinicio
      const rewindBtn = document.createElement("button");
      rewindBtn.className = "plyr__control";
      rewindBtn.id = "plyr-rewind";
      rewindBtn.innerHTML = '<i class="fas fa-step-backward"></i><span class="plyr__sr-only">Retroceder 10 segundos</span>';
      rewindBtn.title = "Retroceder 10s";
      rewindBtn.addEventListener("click", () => {
        video.currentTime = Math.max(video.currentTime - 10, 0);
      });
      controls.insertBefore(rewindBtn, restartBtn.nextSibling);

      // 3Ô∏è‚É£ Crear bot√≥n de Avance (#plyr-fast-forward) est√°ndar de Plyr
      const forwardBtn = document.createElement("button");
      forwardBtn.className = "plyr__control";
      forwardBtn.id = "plyr-fast-forward";
      forwardBtn.innerHTML = '<i class="fa fa-forward"></i><span class="plyr__sr-only">Avanzar 10 segundos</span>';
      forwardBtn.title = "Avanzar 10s";

      const playButton = controls.querySelector('.plyr__control[data-plyr="play"]');
      if (playButton) {
        playButton.after(forwardBtn);
      } else {
        controls.appendChild(forwardBtn);
      }

      forwardBtn.addEventListener("click", () => {
        video.currentTime = Math.min(video.currentTime + 10, video.duration);
      });
    }
  });
});
</script>



<!-- L√≥gica para guardar posici√≥n y mostrar mensaje de reanudaci√≥n por episodio -->
<script>
document.addEventListener("DOMContentLoaded", () => {
  const mainVideo = document.querySelector('.main-video video');
  const resumeMsg = document.getElementById('resume-msg');
  let currentEpisode = null;

  // Al hacer clic en un episodio
  document.querySelectorAll('.video-list .vid').forEach(videoItem => {
    videoItem.addEventListener('click', e => {
      // Identificamos el episodio por posici√≥n en la lista
      const episodeIndex = Array.from(document.querySelectorAll('.video-list .vid')).indexOf(videoItem);
      currentEpisode = episodeIndex;

      // Cambiamos la fuente del video
      const src = videoItem.querySelector('video').getAttribute('src');
      mainVideo.setAttribute('src', src);

      // Checamos si existe posici√≥n guardada para este episodio
      const savedTime = localStorage.getItem(`pos_episodio_${episodeIndex}`);
      if (savedTime && parseFloat(savedTime) > 10) {
        mainVideo.currentTime = parseFloat(savedTime);
        resumeMsg.textContent = `‚úÖ Reanudando ${videoItem.querySelector('.title').textContent.trim()} donde lo dejaste`;
        resumeMsg.classList.add('visible');
        setTimeout(() => {
          resumeMsg.classList.remove('visible');
        }, 3000);
      }
    });
  });

  // Guardamos posici√≥n cada 5 seg para cada episodio activo
  setInterval(() => {
    if (!mainVideo.paused && !mainVideo.ended && currentEpisode !== null) {
      localStorage.setItem(`pos_episodio_${currentEpisode}`, mainVideo.currentTime);
    }
  }, 5000);
});
</script>


<!-- ACELERAR VIDEO -->
<script>
const videoList = document.querySelectorAll('.video-list .vid');
const mainVideo = document.querySelector('.main-video video');

videoList.forEach(videoItem => {
  videoItem.addEventListener('click', e => {
    videoList.forEach(v => v.classList.remove('active'));
    videoItem.classList.add('active');

    const videoSrc = videoItem.getAttribute('data-url');
    mainVideo.setAttribute('src', videoSrc);
    mainVideo.play();
  });
});
</script>


<!-- partial -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js'></script>
<script type="text/javascript">
let listVideo = document.querySelectorAll('.video-list .vid');
let mainVideo = document.querySelector('.main-video video');
let title = document.querySelector('.main-video .title');

listVideo.forEach(video =>{
  video.onclick = () =>{
    listVideo.forEach(vid => vid.classList.remove('active'));
    video.classList.add('active');
    if(video.classList.contains('active')){
      let src = video.children[0].getAttribute('src');
      mainVideo.src = src;
      let text = video.children[1].innerHTML;
      title.innerHTML = text;
    };
  };
});
</script>
<script src="https://cdn.plyr.io/3.6.12/plyr.js"></script>
<script>//<![CDATA[
const players = Array.from(document.querySelectorAll('.js-player')).map(player => new Plyr(player));
//]]></script>
</body>
</html>