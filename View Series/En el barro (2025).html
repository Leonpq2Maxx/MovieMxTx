```html
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>En el barro (2025)</title>
<style>
body { background-color: #111; color: white; font-family: Arial, sans-serif; margin:0; padding:20px; }

/* --- Episodios (vertical con miniatura) --- */
.ep-card {
  display: flex;
  align-items: center;
  padding: 8px;
  border-radius: 8px;
  border: 1px solid rgba(255,255,255,0.05);
  gap: 12px;
  margin-bottom: 10px;
  transition: background 0.2s ease;
}
.ep-card:hover { background: rgba(255,255,255,0.05); }
.ep-thumb {
  width: 80px;
  height: 120px;
  border-radius: 6px;
  background-size: cover;
  background-position: center;
  flex-shrink: 0;
  position: relative;
}
.ep-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,0.3);
  color: white;
  font-size: 1.5rem;
  opacity: 0;
  transition: opacity 0.2s;
}
.ep-thumb:hover .ep-overlay { opacity: 1; }
.ep-meta { flex: 1; }
.ep-title { font-weight: bold; font-size: 1rem; margin-bottom: 5px; }
.ep-progress {
  height: 6px;
  background: rgba(255,255,255,0.1);
  border-radius: 3px;
  overflow: hidden;
  display: none;
}
.ep-progress span {
  display: block;
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #e50914, #ff7878);
  transition: width 0.3s ease;
}

/* --- Modal elegante para reanudar --- */
#resume-backdrop {
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.6);
  z-index:9998;
  opacity:0;
  transition:opacity 0.3s ease;
}
#resume-backdrop.visible { display:block; opacity:1; }
#resume-modal {
  display:none;
  position:fixed;
  left:50%; top:50%;
  transform:translate(-50%,-50%) scale(0.95);
  background:rgba(20,20,20,0.95);
  color:white;
  padding:20px;
  border-radius:12px;
  z-index:9999;
  width:280px;
  text-align:center;
  box-shadow:0 8px 20px rgba(0,0,0,0.6);
  opacity:0;
  transition:all 0.25s ease;
}
#resume-modal.visible {
  display:block;
  opacity:1;
  transform:translate(-50%,-50%) scale(1);
}
#resume-modal p { margin-bottom:15px; }
#resume-modal button {
  margin:5px;
  padding:8px 14px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  font-weight:bold;
}
#resume-yes { background:#e50914; color:#fff; }
#resume-no { background:#333; color:#fff; }
#resume-yes:hover { background:#b00610; }
#resume-no:hover { background:#555; }
</style>
</head>
<body>
<h2 id="episodio-actual">üì∫ Viendo: Ninguno</h2>

<video class="vid1" width="100%" controls>
  <source src="" type="video/mp4">
</video>

<h3>Lista de episodios</h3>
<div id="episodes-grid"></div>

<!-- Modal flotante -->
<div id="resume-backdrop" aria-hidden="true"></div>
<div id="resume-modal" role="dialog" aria-modal="true" aria-labelledby="resume-text">
  <p id="resume-text">¬øQuieres reanudar este episodio?</p>
  <div>
    <button id="resume-yes">‚ñ∂ Reanudar</button>
    <button id="resume-no">‚èÆ Desde el inicio</button>
  </div>
</div>

<script>
const SERIES_KEY = "EnElBarro_2025";
window.seasonsData = [
  { title: "Temporada 1", episodes: [
    { id: "s1e1", title: "Episodio 1", href: "video1.mp4", thumb: "https://via.placeholder.com/80x120?text=E1" },
    { id: "s1e2", title: "Episodio 2", href: "video2.mp4", thumb: "https://via.placeholder.com/80x120?text=E2" }
  ]}
];

(function(){
  const videoElement = document.querySelector(".vid1");
  const episodesGrid = document.getElementById("episodes-grid");
  const fmtTime = s => {
    s = Math.floor(s || 0);
    return `${Math.floor(s/60)}:${("0"+(s%60)).slice(-2)}`;
  };

  function renderEpisodes() {
    episodesGrid.innerHTML = "";
    const episodes = window.seasonsData[0].episodes;
    episodes.forEach(ep => {
      const card = document.createElement("div");
      card.className = "ep-card";
      const thumb = ep.thumb || "https://via.placeholder.com/80x120?text=Serie";
      card.innerHTML = `
        <div class="ep-thumb" style="background-image:url('${thumb}')">
          <div class="ep-overlay">‚ñ∂</div>
        </div>
        <div class="ep-meta">
          <div class="ep-title">${ep.title}</div>
          <div class="ep-progress" id="progress-${ep.id}"><span></span></div>
        </div>
        <button class="play-btn">‚ñ∂</button>
      `;
      card.querySelector(".play-btn").onclick = () => playEpisode(ep);
      episodesGrid.appendChild(card);

      const saved = localStorage.getItem(`progreso_${SERIES_KEY}_${ep.id}`);
      if (saved) {
        const bar = document.getElementById(`progress-${ep.id}`);
        bar.style.display = "block";
        const dur = localStorage.getItem(`progreso_${SERIES_KEY}_${ep.id}_dur`) || 0;
        const pct = dur ? Math.min(100, Math.round((parseFloat(saved)/dur)*100)) : 0;
        bar.querySelector("span").style.width = pct + "%";
      }
    });
  }

  function playEpisode(ep) {
    const src = ep.href;
    const PROG_KEY = `progreso_${SERIES_KEY}_${ep.id}`;
    const PROG_DUR = `${PROG_KEY}_dur`;
    const source = videoElement.querySelector("source");
    source.src = src;
    videoElement.load();

    const saved = localStorage.getItem(PROG_KEY);
    const savedDur = localStorage.getItem(PROG_DUR);
    const modal = document.getElementById("resume-modal");
    const backdrop = document.getElementById("resume-backdrop");
    const resumeText = document.getElementById("resume-text");

    if (saved && savedDur && parseFloat(saved) > 5) {
      resumeText.innerHTML = `¬øQuieres reanudar en el minuto <strong>${fmtTime(saved)}</strong>?`;
      modal.classList.add("visible");
      backdrop.classList.add("visible");

      document.getElementById("resume-yes").onclick = () => {
        modal.classList.remove("visible");
        backdrop.classList.remove("visible");
        videoElement.currentTime = parseFloat(saved);
        videoElement.play();
      };
      document.getElementById("resume-no").onclick = () => {
        modal.classList.remove("visible");
        backdrop.classList.remove("visible");
        videoElement.currentTime = 0;
        videoElement.play();
      };
    } else {
      videoElement.currentTime = 0;
      videoElement.play();
    }

    localStorage.setItem(`ultimoEpisodio_${SERIES_KEY}`, JSON.stringify(ep));
    document.getElementById("episodio-actual").textContent = "üì∫ Viendo: " + ep.title;

    if (window._saveProgress) clearInterval(window._saveProgress);
    window._saveProgress = setInterval(() => {
      if (!videoElement.paused && !videoElement.ended) {
        const t = videoElement.currentTime || 0;
        const d = videoElement.duration || 0;
        localStorage.setItem(PROG_KEY, t);
        localStorage.setItem(PROG_DUR, d);
        const bar = document.getElementById(`progress-${ep.id}`);
        if (bar) {
          bar.style.display = "block";
          bar.querySelector("span").style.width = (d ? (t/d*100) : 0) + "%";
        }
      } else if (videoElement.ended) {
        localStorage.removeItem(PROG_KEY);
        localStorage.removeItem(PROG_DUR);
        clearInterval(window._saveProgress);
      }
    }, 3000);
  }

  renderEpisodes();
})();
</script>
</body>
</html>
```
