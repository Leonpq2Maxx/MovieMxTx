<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <title>MovieTx - Reproductor De Serie</title>
    <!-- Responsive viewport -->
    <meta content='width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0' name='viewport'/>
    <link rel="stylesheet" href="https://cdn.plyr.io/3.6.12/plyr.css"/>
    <style>
      :root {
        --plyr-color-main: #ff0000;
        --plyr-video-control-color:rgb(255, 255, 255);
      }
      
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        outline: none;
        -webkit-tap-highlight-color: transparent;
        user-select: none;
      }
      
      body {
        background-color: #000;
        font-family: 'PT Sans', sans-serif;
        color: #fff;
      }
    
      .video {
        position: relative;
        padding-top: 56.25%; /* 16:9 aspect ratio */
        height: 0;
        overflow: hidden;
        max-width: 100%;
        margin: 0 auto;
      }
      
      .video video,
      .video iframe,
      .video .plyr {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }

      .info {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        align-items: center;
        justify-content: center;
        padding: 10px;
        border: 1px solid rgba(16, 235, 255, 0.461);
        border-radius: 10px;
        margin: 10px;
        font-size: 14px;
      }
    
      .info i {
        display: flex;
        align-items: center;
        gap: 4px;
      }
    
      .hd-tag {
        display: flex;
        align-items: center;
        gap: 6px;
      }
    
      .hd-tag svg {
        border-radius: 4px;
      }
    
      .titulo, .sinopsis {
        padding: 10px;
      }
    
      .titulo h3, .titulo h4, .sinopsis h4 {
        font-family: 'Kanit', sans-serif;
        margin-bottom: 5px;   
      }
    
      .recomendaciones {
        padding: 10px;    
      }
    
      .series-grid {
        display: grid;     
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));     
        gap: 15px;    
        text-align: center;  
      }
    
      .serie {      
        display: flex;     
        flex-direction: column;     
        align-items: center;     
        text-decoration: none;   
        color: white;   
      }
    
      .serie img {
        width: 120px;
        height: 180px;    
        object-fit: cover;
        border-radius: 10px; 
      }
    
      .serie p {      
        margin-top: 5px;   
      }

    
      html { font-size: 100%; } 
      body { font-size: 1rem; }   
      h1 { font-size: 2rem; }   
      h2 { font-size: 1.5rem; }   
      h3, h4 { font-size: 1.2rem; }
    
      @media screen and (max-width: 768px) {      
        body { font-size: 1.05rem; }      
        h1 { font-size: 1.5rem; }      
        h2 { font-size: 1.3rem; }      
        h3, h4 { font-size: 1.1rem; }      
        .info, .sinopsis p, .serie p {        
          font-size: 0.80rem !important; /*estaba en 1rem*/     
        }   
      }

      @media screen and (max-width: 480px) {
        body { font-size: 1.1rem; }
        h1 { font-size: 1.4rem; }
        h2 { font-size: 1.2rem; }
        h3, h4 { font-size: 0.80rem; } /*estaba en 1rem*/
      }

    
      body, p, h1, h2, h3, h4, h5, h6, span, a, .titulo, .sinopsis, .recomendaciones, .serie {    
        font-style: italic;   
      }
 
      .info, .info *, .info span, .info i {   
        font-style: normal !important;  
      }
    
      #resume-msg {      
        display: none;     
        position: fixed;    
        top: 20px;    
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.85);
        padding: 10px 20px;
        color: #0f0;
        border-radius: 8px;
        z-index: 9999;
        font-weight: bold;
        max-width: 90%;
        font-size: 1rem;
        text-align: center;
        box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
        opacity: 0;
        transition: opacity 0.8s ease;
      }

      #resume-msg.visible {      
        display: block;
        opacity: 1;
      }

      @media (max-width: 480px) {      
        #resume-msg {
          font-size: 0.9rem;
          padding: 8px 16px;
        }
      }

    </style>
    <link rel="stylesheet" href="" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <link href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" rel="stylesheet">
  </head>
  
  <body>
    <div class="container">
      <div class="main-video">
        <div class="video">
          <video class='js-player' poster="https://image.tmdb.org/t/p/w780/cvaXVVVHi7TNv2HPJwQLTsoilbb.jpg" controls muted preload="metadata"> <!--Aca te dejo la pagina para agregar el fondo https://www.themoviedb.org-->
            <source src="https://www.udrop.com/file/6goa/1x1" type="application/x-mpegURL">
          </video>
          <!--<video src="" poster="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR3r48KQZbrv_w2zeTpEMqrIE0BysJMnmdydw&usqp=CAU" controls muted autoplay></video>-->
        </div>
      </div>
    </div>  
    <div id="resume-msg">✅ Reanudando donde lo dejaste: Moisés y los Diez Mandamientos</div>
  
    <div class="info">
      <i class="fal fa-calendar-alt"></i><span>2015</span> <!-- AÑO DE ESTRENO DE LA SERIE -->
      <i class="fal fa-clock"></i><span>T1</span> <!-- LA CANTIDAD DE TEMPORADAS QUE TIENE EJEMPLO "T1 (SI TIENE UNA TEMPORADAS)" SI TIENE VARIAS AGREGAR "T4" SERIAN TEMPORADA 4--> 
      <i class="fal fa-thumbs-up"></i><span>79%</span> <!-- LA CALIFICACION DE LA SERIE -->   
      <div class="hd-tag">     
        <svg width="22" height="22" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">      
          <rect width="24" height="24" rx="4" fill="white" />       
          <text x="4" y="17" fill="black" font-size="12" font-family="Arial, sans-serif" font-style="italic" font-weight="bold">HD</text>     
        </svg>     
        <span>1080P</span>   
      </div>
      <span>🇲🇽</span>
    </div>
  
    <div class="titulo">
      <h3>Moisés y los Diez Mandamientos</h3>
    </div>
  
    <!-- Selector de Temporadas y Botones de Episodios -->
     
    <div style="display: flex; align-items: center; justify-content: space-between; padding: 10px; flex-wrap: wrap;">
      <div>
        <select id="temporada-select" style="background: #1c1c1c; color: white; font-size: 1rem; padding: 5px 10px; border-radius: 5px; border: 1px solid #333;">
          <option value="1" selected>Temporada 1</option>
        </select>
      </div>
      <div id="episodio-count" style="color: #bbb; font-size: 0.95rem;">10 Capítulos</div>
    </div>

    <!-- Botones de episodios -->
     <div id="episodios" style="
     display: flex;
     flex-wrap: nowrap;
     gap: 10px;
     padding: 10px;
     overflow-x: auto;
     white-space: nowrap;
     scroll-snap-type: x mandatory;
     -webkit-overflow-scrolling: touch;
    "></div>
    
    <script>
      const episodiosData = {
        1: [
          { titulo: "Episodio 1 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_sqgi2mua/format/applehttp/protocol/https/flavorIds/1_30h1v5r4,1_mxxwv7xp,1_15gov07p,1_azcldmfw,1_68z8mkhk,1_dfy905r1,1_3h3bl0ga,1_gpdug8me/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 2 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_n8b4cjwj/format/applehttp/protocol/https/flavorIds/1_umpi5qn4,1_4z4eafiu,1_nzrlox6p,1_k65ykb0c,1_z74xqy2s,1_221h8fq4,1_mn15nr7v,1_nmaonehv/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 3 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_7c399pil/format/applehttp/protocol/https/flavorIds/1_l7yakppm,1_0q3vf9bf,1_q1n626e3,1_fqll7tt2,1_9vxfj790,1_bd3a71d4,1_pp96502r,1_v150prlw/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 4 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_nb9jeye6/format/applehttp/protocol/https/flavorIds/1_ev5uqwiz,1_1pcwt9tq,1_7vrpgasr,1_dviv9xy8,1_meuiennw,1_4wvxfj2s,1_nkg7k71q,1_a13z8hfy/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 5 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_9lnht10l/format/applehttp/protocol/https/flavorIds/1_gr4ejwsd,1_e5etniza,1_x88b6pg2,1_829h5unv,1_zsc40ew6,1_re3jyvbo,1_zl9s13wq,1_1np0wihz/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 6 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_299n0ac4/format/applehttp/protocol/https/flavorIds/1_86k4uspl,1_0dr6ptbk,1_4doilpkh,1_ia72i3ef,1_wtyonpbf,1_pl2jdstc,1_15ep9qh7,1_3w1nn9ho/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 7 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_sa0y9sbn/format/applehttp/protocol/https/flavorIds/1_uft6kdz3,1_ydi2tu9p,1_8ddp6k7k,1_wo9jj2wm,1_mxjqbo16,1_tgpqs1vl,1_ixwpx81u,1_94bj1m8s/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 8 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_9bv4ipce/format/applehttp/protocol/https/flavorIds/1_oqa79fka,1_trv9jaor,1_rycj3nsw,1_qlkwl2xr,1_lc0ypvhh,1_1wzeguhz,1_dd23ccg8,1_anihk1ly/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 9 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_qt9h3ys4/format/applehttp/protocol/https/flavorIds/1_ergmxfln,1_usnvtc4q,1_unwfdjjc,1_9bsmgdcw,1_f58nkxpa,1_t3p1zc32,1_lbul3fhx,1_r1l7cqvs/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 10 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_yil10mzs/format/applehttp/protocol/https/flavorIds/1_rpc3x70n,1_vclcwx8f,1_wia5bk5q,1_iygzvz5h,1_fa2iiaft,1_fuonovpo,1_t2orrlqt,1_tsowhkw2/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 11 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_qezrbfkw/format/applehttp/protocol/https/flavorIds/1_hwxvyglv,1_a10x5zfn,1_llyp7bv3,1_4mlg9ae3,1_jqtsci0c,1_f18r2hlp,1_qk5rshph,1_nu872lku/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 12 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_63jcdurf/format/applehttp/protocol/https/flavorIds/1_nxc5o9pk,1_uqig1kno,1_by3rji3y,1_d1za1ubf,1_fvhtcbe8,1_y9udavvi,1_cxmh53lk,1_sdmck8wu/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 13 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_nv7gt016/format/applehttp/protocol/https/flavorIds/1_g1nqvobx,1_5uh9p82l,1_thx4ht8r,1_lswg8nr5,1_a7go3tji,1_l9nrsr5e,1_sb1lsb3r,1_603qe4w2/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 14 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_4520ivwj/format/applehttp/protocol/https/flavorIds/1_y9ccev7v,1_4sdr4lzr,1_4wwkxfm8,1_woj3jhft,1_01b1ivy8,1_9noh58o1,1_21sbi3qu,1_h0g90bzf/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 15 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_u65ug10m/format/applehttp/protocol/https/flavorIds/1_l9ldaqgh,1_h2qd5k1p,1_lxvukv31,1_x61i12fo,1_egbyqfdb,1_h8sdmumk,1_7wg4wbq5,1_rf60342k/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 16 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_plym731o/format/applehttp/protocol/https/flavorIds/1_j1bvcpnl,1_b4nb3hf4,1_m00n2mop,1_p3hxxm80,1_u3ixttth,1_27l331rt,1_2wfhc3xl,1_1u8xogtz/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 17 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_5ec4suxz/format/applehttp/protocol/https/flavorIds/1_72e9qu3h,1_laundplo,1_2du6liuf,1_2zwopc73,1_um03lxjr,1_zho26qa9,1_y7tqwchf,1_3a3vhog9/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 18 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_hqdjardg/format/applehttp/protocol/https/flavorIds/1_94f5xgmu,1_y2d5rfmj,1_zhpapibs,1_fc0iehi6,1_96eueein,1_mwgl4i5c,1_3o8hi6qs,1_51l5kkio/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 19 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_wbtvxkli/format/applehttp/protocol/https/flavorIds/1_murm4mvy,1_h2ggq29k,1_7o0b7tnm,1_tbqwyvpj,1_0kifymop,1_a8xjwckh,1_0sjy6p2l,1_l4txome9/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 20 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_619duc4s/format/applehttp/protocol/https/flavorIds/1_1mkd490l,1_36tt8puv,1_jigzhk6e,1_p4c1k0qg,1_dk706u2b,1_vf2hzvot,1_2l5ubc7m,1_aabfjo7e/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 21 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_t20gqzmp/format/applehttp/protocol/https/flavorIds/1_9yqkiv5b,1_4svulaoh,1_smtqmm1n,1_0zirfldg,1_k5sgz13f,1_f20kx7u8,1_dj0ed3x3,1_okpna9aa/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 22 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_74jrrdhd/format/applehttp/protocol/https/flavorIds/1_kjh76gxa,1_46mxbsdk,1_u0vj43b2,1_epi2qxus,1_1hjghcxc,1_56ejtzdv,1_h0rqf0h9,1_xxx4fmnf/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 23 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_s0h6nuln/format/applehttp/protocol/https/flavorIds/1_cszgy7m3,1_w0wcsjnx,1_zsbhoqaz,1_x6slwhat,1_44fvs27t,1_xx6z25t9,1_vl56spvy,1_98syqhia/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 24 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_qozwetxk/format/applehttp/protocol/https/flavorIds/1_wowr0gvg,1_e2ulxc4u,1_1usmflk4,1_5jzvandx,1_8i0bc7kn,1_ltp17bg0,1_9rguhbuo,1_anogi9s8/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 25 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_0yc0k97m/format/applehttp/protocol/https/flavorIds/1_ym54xfiv,1_oyfxewwz,1_gqelv2il,1_b8wy8lkn,1_zux0lige,1_mfcwdtg7,1_9oauyzh5,1_7fsv646f/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 26 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_s0z9hg5b/format/applehttp/protocol/https/flavorIds/1_jr2lmmnj,1_k6hebck4,1_mdww5q8k,1_xb2hbgwt,1_72guxynj,1_chq6we10,1_raqassm3,1_yvzdy6gd/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 27 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_rdxqdvqt/format/applehttp/protocol/https/flavorIds/1_4omohz2o,1_cerhp2k2,1_9fpcs7ko,1_b02enwl9,1_sx0fqo5e,1_cfm1r5uq,1_x9jb166v,1_2vr8rpgz/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 28 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_w10o9i0e/format/applehttp/protocol/https/flavorIds/1_us86q7mx,1_r8o5gqnf,1_obv5v6yz,1_r4htngo4,1_o4bhp1pk,1_kdaup6gn,1_20tiyjes,1_zgibhpep/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 29 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_1gb417ae/format/applehttp/protocol/https/flavorIds/1_wtpcbo2z,1_kusf1vm7,1_35gh23ui,1_8544r8bp,1_ukx2gcjj,1_qf9pzqyg,1_oqkfb06m,1_829ftkp2/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 30 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_0g1vlg5q/format/applehttp/protocol/https/flavorIds/1_crpnmg22,1_d0svbmiu,1_selgspqk,1_dcmkvy7z,1_aa8lputv,1_3gb3m2qq,1_xiu0n6pc,1_knf8kgbj/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 31 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_m43qexmy/format/applehttp/protocol/https/flavorIds/1_d9nlx9xb,1_ba9zttmc,1_t05wpd60,1_b6ag27ra,1_wulf4c65,1_vflquvlt,1_atatgu3t,1_aclxbxly/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 32 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_jcpkuv12/format/applehttp/protocol/https/flavorIds/1_so45lpft,1_zyp1lyb1,1_xxamfvlf,1_uv7eraa9,1_s6e39zlc,1_zh53lmi2,1_ljow0qr7,1_2tdz46c2/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 33 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_p85a9k4z/format/applehttp/protocol/https/flavorIds/1_ypqamqeh,1_gc7g49sm,1_kup1zkhc,1_hzehkop9,1_58i4auif,1_wqsqb0r2,1_gowkbnlp,1_qmfrbw1c/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 34 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_6f8l70l7/format/applehttp/protocol/https/flavorIds/1_gkekrnqi,1_s1axbgr3,1_s9xaf3t2,1_xytw4sta,1_dad57cwg,1_cyrlwctv,1_aejdhnfo,1_cynht55d/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 35 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_9hzrm2dl/format/applehttp/protocol/https/flavorIds/1_ereebtjv,1_wgrqs168,1_vt3ab0tq,1_jmjdqb75,1_ptwgc4sl,1_p33t7jy3,1_qs5lmfj9,1_qjsjo0ha/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 36 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_iuaak1yk/format/applehttp/protocol/https/flavorIds/1_w1snmoch,1_9o9equz6,1_crq81rmg,1_qvs6og0w,1_19coqv60,1_coxsrwxo,1_xxzkwwo8,1_mu7oikvh/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 37 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_6zuy4h5r/format/applehttp/protocol/https/flavorIds/1_43rktltx,1_n55nc4ud,1_r8m2j1z1,1_bsn2cdxb,1_6gul9a1j,1_lafm06wp,1_p5rjjx40,1_hl3zankq/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 38 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_g4r8qca6/format/applehttp/protocol/https/flavorIds/1_kw4djft5,1_z0v7omn0,1_2tr5dp9x,1_8vx17nci,1_2vsmtfne,1_zwkhp5dd,1_y3aarrj2,1_c55btu55/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 39 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_zufxtrlc/format/applehttp/protocol/https/flavorIds/1_ze1qznft,1_c5opdms4,1_rsb1r9wr,1_i3qlpu5l,1_gkc0fj49,1_68jvsebt,1_kagdhs66,1_g7aaf1jy/preferredBitrate/1500/maxBitrate/10000/a.m3u8 " },
          { titulo: "Episodio 40 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_tb79qebc/format/applehttp/protocol/https/flavorIds/1_wwq64glt,1_p9jaxdlv,1_1flm0d0f,1_tly96qz7,1_y1kwg7ti,1_hk9ymq42,1_bz4lbnkv,1_ifoichza/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 41 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_nslcwp78/format/applehttp/protocol/https/flavorIds/1_bgd858d1,1_xqget5ul,1_y4zu7owg,1_l3hcee3d,1_pkozziaq,1_goui9127,1_aeolrxrx,1_dy3nmd1n/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 42 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_1bijk2dq/format/applehttp/protocol/https/flavorIds/1_0u6syr35,1_utlyfp78,1_mzjss8ff,1_a1wr5w9e,1_l1t5di30,1_0pptan92,1_zbvfknfw,1_sp54c5v5/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 43 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_0251p0ke/format/applehttp/protocol/https/flavorIds/1_2n1inhpe,1_q5qjnwi3,1_5ut1jfsi,1_2icnrmw0,1_vh2suw65,1_bqbvzssw,1_dzipge2k,1_wht0uk2n/preferredBitrate/1500/maxBitrate/10000/a.m3u8" },
          { titulo: "Episodio 44 - TITULO DE EPISODIO", src: "https://cdnapisec.kaltura.com/p/2657331/sp/265733100/playManifest/entryId/1_v6o8z1yi/format/applehttp/protocol/https/flavorIds/1_thovax0f,1_91f2tw44,1_gpsn7nsz,1_pczo7jzl,1_78q4ql2w,1_pfo7t0u8,1_uodq03cz,1_osp5o5tw/preferredBitrate/1500/maxBitrate/10000/a.m3u8" }
          // Agrega más si tienes
        ],
      };
      const temporadaSelect = document.getElementById("temporada-select");
      const episodiosContainer = document.getElementById("episodios");
      const episodioCount = document.getElementById("episodio-count");
      const mainVideo = document.querySelector('.main-video video');
      const titleDiv = document.querySelector('.main-video .title');

      function renderEpisodios(temporada) {
        episodiosContainer.innerHTML = "";
  
        const episodios = episodiosData[temporada] || [];
        const yearSpan = document.querySelector('.info span');
        const yearBySeason = { 1: '2015'};  /*ACA HAY QUE CAMBIAR EL AÑO POR EJ: EL AÑO SE LA SERIE SE ESTRENO EN EL "2010" DEBES DE CAMBIAR 2023 Y PONER 2010 (ABAJO HAY OTRO DEBE HACER LO MISMO)*/
        if (yearSpan) yearSpan.textContent = yearBySeason[temporada] || '0000';
        episodioCount.textContent = `${episodios.length} Capítulos`;
        
        episodios.forEach((ep, index) => {
          const btn = document.createElement("button");
          btn.textContent = index + 1;
          btn.style.cssText = `
          width: 40px; height: 40px;
          background: #222; border: none; border-radius: 5px;
          color: #ccc; font-size: 1rem; cursor: pointer;
          `;
          
          btn.addEventListener("click", () => {
            mainVideo.setAttribute("src", ep.src);
            if (titleDiv) {
              titleDiv.innerHTML = ep.titulo;
            }
          });
          episodiosContainer.appendChild(btn);
        });
  
        // Marcar automáticamente el primer episodio
        const firstBtn = document.querySelector('#episodios button');
        if (firstBtn) {
          firstBtn.classList.add('active');
          firstBtn.style.background = 'red';
          firstBtn.style.color = '#fff';
        }
      }

      // Inicializar con la temporada por defecto
      renderEpisodios(temporadaSelect.value);

      // Cambiar temporada
      temporadaSelect.addEventListener("change", () => {
        renderEpisodios(temporadaSelect.value);
      });
    </script>
    
    <script>
      let currentEpisodeIndex = 0;

      function renderEpisodios(temporada) { 
        episodiosContainer.innerHTML = "";
        const episodios = episodiosData[temporada] || [];
        const yearSpan = document.querySelector('.info span');
        const yearBySeason = { 1: '2015'}; /*ACA HAY QUE CAMBIAR EL AÑO POR EJ: EL AÑO SE LA SERIE SE ESTRENO EN EL "2010" DEBES DE CAMBIAR 2023 Y PONER 2010*/
        
        if (yearSpan) yearSpan.textContent = yearBySeason[temporada] || '0000';
  
        episodioCount.textContent = `${episodios.length} Capítulos`;
  
        episodios.forEach((ep, index) => {
          const btn = document.createElement("button");
          btn.textContent = index + 1;
          btn.style.cssText = `
          width: 40px; height: 40px;
          background: #222; border: none; border-radius: 5px;
          color: #ccc; font-size: 1rem; cursor: pointer;
          `;
    
          btn.addEventListener("click", () => {
            playEpisode(ep.src, ep.titulo, index);
          });
          episodiosContainer.appendChild(btn);
        });

        // Marcar automáticamente el primer episodio
        const firstBtn = document.querySelector('#episodios button');
        if (firstBtn) {
          firstBtn.classList.add('active');
          firstBtn.style.background = 'red';
          firstBtn.style.color = '#fff';
        }
      }

      function playEpisode(src, titulo, index) {
        currentEpisodeIndex = index;
        mainVideo.src = src;
        mainVideo.load(); // prepara el video sin reproducir //
        mainVideo.pause();
        mainVideo.currentTime = mainVideo.currentTime || 0; // asegúrate que se mantenga en el tiempo guardado si existe
        // forzar reproducción automática
        if (titleDiv) titleDiv.innerHTML = titulo;

  
        // Desmarcar todos los botones
        const buttons = document.querySelectorAll("#episodios button");
        buttons.forEach(btn => {
          btn.classList.remove("active");
          btn.style.background = "#222";
          btn.style.color = "#ccc";
        });


        // Marcar el botón actual en rojo
  
        buttons[index]?.classList.add("active");
        buttons[index].style.background = "red";
        buttons[index].style.color = "#fff";

  
        // Reanudar si hay guardado
  
        const msg = document.getElementById("resume-msg");
        msg.textContent = `✅ ${titulo}`;
        msg.classList.add("visible");
        setTimeout(() => msg.classList.remove("visible"), 3000);
  
        localStorage.setItem("ultimo_episodio", JSON.stringify({
          temporada: temporadaSelect.value,
          index: index
        }));
      }

      // Guardar tiempo cada 5s

      setInterval(() => {
        if (!mainVideo.paused && !mainVideo.ended) {
          localStorage.setItem(`resume_${temporadaSelect.value}_${currentEpisodeIndex}`, mainVideo.currentTime);
        }
      }, 5000);


      mainVideo.addEventListener("pause", () => {
        if (autoNextPlaying && !mainVideo.ended) {
          autoNextPlaying = false;
        }
      });


      // Auto-next al finalizar

      mainVideo.addEventListener("ended", () => {
        mainVideo.currentTime = 0;
        const episodios = episodiosData[temporadaSelect.value] || [];
        if (currentEpisodeIndex + 1 < episodios.length) {
          const next = episodios[currentEpisodeIndex + 1];
          playEpisode(next.src, next.titulo, currentEpisodeIndex + 1);
        }
      });

      // Re-render al cambiar temporada

      temporadaSelect.addEventListener("change", () => {
        // Detener y reiniciar el video
        mainVideo.pause();
        mainVideo.removeAttribute("src");
        mainVideo.load(); // reinicia el reproductor
      });

      // Limpiar título
      if (titleDiv) titleDiv.innerHTML = "Selecciona un episodio";
      // Limpiar botones marcados
  
      document.querySelectorAll("#episodios button").forEach(btn => {
        btn.classList.remove("active");
        btn.style.background = "#222";
        btn.style.color = "#ccc";
      });

      // Inicial

      const ultimo = JSON.parse(localStorage.getItem("ultimo_episodio") || "null");

      if (ultimo && episodiosData[ultimo.temporada]) {
        temporadaSelect.value = ultimo.temporada;
        renderEpisodios(ultimo.temporada);
        const ep = episodiosData[ultimo.temporada][ultimo.index];
        if (ep) {
    
          currentEpisodeIndex = ultimo.index;
          mainVideo.src = ep.src;
          mainVideo.load(); // carga sin reproducir
          mainVideo.pause();
          if (titleDiv) titleDiv.innerHTML = ep.titulo;
          const buttons = document.querySelectorAll("#episodios button");
    
          buttons.forEach(btn => {
            btn.classList.remove("active");
            btn.style.background = "#222";
            btn.style.color = "#ccc";
          });
    
          buttons[ultimo.index]?.classList.add("active");
          buttons[ultimo.index].style.background = "red";
          buttons[ultimo.index].style.color = "#fff";
    
          // Scroll automático centrado al botón del episodio guardado
    
          const targetBtn = buttons[ultimo.index];
          if (targetBtn && episodiosContainer) {
            setTimeout(() => {
              const scrollLeft = targetBtn.offsetLeft - (episodiosContainer.offsetWidth / 2) + (targetBtn.offsetWidth / 2);
              episodiosContainer.scrollTo({ left: scrollLeft, behavior: "smooth" });
            }, 100);
          }

          const msg = document.getElementById("resume-msg");
          msg.textContent = `✅ ${ep.titulo} cargado`;
          msg.classList.add("visible");
          setTimeout(() => msg.classList.remove("visible"), 3000);
        }
      
      } else {
        renderEpisodios(temporadaSelect.value);
        const ep = episodiosData[temporadaSelect.value][0];
        mainVideo.src = ep.src;
        mainVideo.load();
        mainVideo.pause();
  
        if (titleDiv) titleDiv.innerHTML = ep.titulo;

  
        const buttons = document.querySelectorAll("#episodios button");
        buttons[0]?.classList.add("active");
        buttons[0].style.background = "red";
        buttons[0].style.color = "#fff";
      }
    </script>
    
    <style>
      #episodios button {
    
        min-width: 40px;
        height: 40px;
        flex: 0 0 auto;
        scroll-snap-align: start;
      }
      
      #episodios button.active {
        background: red !important;
        color: white !important;
      }
      
      #episodios button {
        scroll-snap-align: start;
        flex: 0 0 auto;
      }

      #episodios::-webkit-scrollbar {
        height: 6px;
      }

      #episodios::-webkit-scrollbar-thumb {
        background: #888;
        border-radius: 5px;
      }
      #episodios::-webkit-scrollbar-track {
        background: #111;
      }
      
      /* Personaliza el contenedor */

      #temporada-select:focus {
        outline: none;
        border-color: #ff4444;
        box-shadow: 0 0 6px #ff4444;
      }
    </style>
    <br>
    <div class="titulo">
      <h4>Género: Drama/Biblia/Romance/Historia/Misterio</h4> <!--Aca va el genero de la serie-->
    </div>
  
    <div class="sinopsis">
      <h4>
        Sinopsis: <!--Aca va la sinopsis en el <p>Sinopsis</<p> que esta debajo-->
      </h4>
      <p>
        Conoce la historia de Moisés, siguiendo la conocida historia de las plagas y mandamientos, y entretejiendo otras historias de los hebreos y egipcios que influyeron en su vida. <!--ejemplo-->
      </p>
    </div>
  
    <div style="text-align: center; margin-top: 15px;">
      <button id="btn-favorito" style="
        background: #ff4444;
        color: white;
        padding: 10px 16px;
        border: none;
        border-radius: 20px;
        font-size: 1rem;
        cursor: pointer;
        ">
        ⭐ Favoritos
      </button>
    </div>
    <br>

    <div class="recomendaciones">
      <h4>Podría interesarte:</h4>
      <br>
      <div class="series-grid">
        <a href="#" class="serie">
          <img loading="lazy" src="../img poster/Agregar peliculas.gif" alt=""> <!--Aca va las imagenes de las series solo debes de agregar la ultima parte despues de la "/" ej: (https://image.tmdb.org/t/p/original/qZJt1XlRVbQhGV7MtZnbiR6vxPh.jpg) solo debes agregar esto (qZJt1XlRVbQhGV7MtZnbiR6vxPh.jpg)-->
          <p>Nombre de serie</p>
        </a>
        <a href="#" class="serie">
          <img loading="lazy" src="../img poster/Agregar peliculas.gif" alt="">
          <p>Nombre de serie</p>
        </a>
        <a href="#" class="serie">
          <img loading="lazy" src="../img poster/Agregar peliculas.gif" alt="">
          <p>Nombre de serie</p>
        </a>
        <a href="#" class="serie">
          <img loading="lazy" src="../img poster/Agregar peliculas.gif" alt="">
          <p>Nombre de serie</p>
        </a>
        <a href="Dragon Ball Daima (2025).html" class="serie">
          <img loading="lazy" src="../img poster/Agregar peliculas.gif" alt="">
          <p>Nombre de serie</p>
        </a>
        <a href="#" class="serie">
          <img loading="lazy" src="../img poster/Agregar peliculas.gif" alt="">
          <p>Nombre de serie</p>
        </a>
      </div>
    </div>
    <br>

    <!--COLOR DE BARRA DE SCROOL-->
    
    <style>
      #episodios {
        overflow-x: auto;
        scrollbar-height: auto;
        scrollbar-color: #ff4444 #111;
      }

      #episodios::-webkit-scrollbar {
        height: 10px;
      }

      #episodios::-webkit-scrollbar-thumb {
        background-color: #ff4444;
        border-radius: 10px;
      }

      #episodios::-webkit-scrollbar-track {
        background: #111;
        border-radius: 10px;
      }
      
      @media (hover: none) and (pointer: coarse) {
        #episodios {
          padding-bottom: 20px;
        }
      }
    </style>
    
    <!-- Historial -->
    
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const serieTitulo = "Moisés y los Diez Mandamientos";
        const serieImagen = "https://image.tmdb.org/t/p/w300/spMIIipBp3sz24zIG1oXgGFfcNZ.jpg"; //Aca va la ultima parte de la imagen como hice el ej de arriba se agrega despues de la barra. esta de esta forma para que la imagen carge mas rapido
        const archivoHTML = "../View Series/Moises Y Los Diez Mandamientos.html"; // ✅ Ruta relativa al historial
        const progresoTexto = "Actualizado"; // Puedes cambiarlo dinámicamente

        let historial = JSON.parse(localStorage.getItem('historial_usuarios') || '[]');    
        const index = historial.findIndex(h => h.titulo === serieTitulo);
    
        if (index === -1) {
          historial.unshift({
            titulo: serieTitulo,
            imagen: serieImagen,
            progreso: progresoTexto,
            archivo: archivoHTML,
            tipo: "serie", // ✅ ya está
            timestamp: Date.now() // ✅ IMPORTANTE
          });
          
          if (historial.length > 20) historial.pop(); /* Limita a 20 */
        }
        else {
          historial[index].progreso = progresoTexto;
          historial[index].timestamp = Date.now(); // ✅ Actualiza orden
        }
        localStorage.setItem('historial_usuarios', JSON.stringify(historial));
      });
    </script>
    
    <!--Aca va el mensaje de capitulo-->
    
    <div id="mensaje-confirmacion" style="
      display: none;
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.85);
      color: #fff;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 1rem;
      z-index: 9999;
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
      transition: opacity 0.5s ease;">
    </div>
    
    <script>
      function mostrarMensaje(texto) {
        const mensaje = document.getElementById('mensaje-confirmacion');
        mensaje.textContent = texto;
        mensaje.style.display = 'block';
        mensaje.style.opacity = '1';
        setTimeout(() => {
          mensaje.style.opacity = '0';
          setTimeout(() => mensaje.style.display = 'none', 500);
        }, 3000);
      }
    </script>

    <!--animacion de favorito-->
    
    <style>
      /* ACA ES LA ANIMACION DE FAVORITOS */
      @keyframes pop {
        0%   { transform: scale(1); }
        50%  { transform: scale(1.3); }
        100% { transform: scale(1); }
      }
    
      #btn-favorito.animado {
        animation: pop 0.3s ease;
      }
    </style>
    <!-- FAVORITOS -->
    <script>
      document.getElementById('btn-favorito').addEventListener('click', () => {
        const nuevaPelicula = {
          titulo: "Moisés y los Diez Mandamientos",
          imagen: "https://image.tmdb.org/t/p/w300/spMIIipBp3sz24zIG1oXgGFfcNZ.jpg",
          genero: "Drama", /* o "Serie", "Crimen/Serie", etc.*/
          archivo: "../View Series/Moises Y Los Diez Mandamientos.html",
          tipo: "serie", // ✅ identifica si es "serie" o "pelicula"
          timestamp: Date.now() // opcional: para ordenar por fecha
        };

        /* animacion de favoritos */
        const btn = document.getElementById('btn-favorito');
        btn.classList.add('animado');
        setTimeout(() => btn.classList.remove('animado'), 300);
        mostrarMensaje("⭐ Agregado a Favoritos");
  
        let favoritos = JSON.parse(localStorage.getItem('favoritos_detalles') || '[]');
        if (!favoritos.some(f => f.titulo === nuevaPelicula.titulo)) {
          favoritos.push(nuevaPelicula);
          localStorage.setItem('favoritos_detalles', JSON.stringify(favoritos));
        }
        window.location.href = "../View Peliculas/favoritos.html";
      });
    </script>
    
    <!-- Añadir Botones para .js-player: Reinicio al inicio (fa-step-backward), Retroceso (fa-undo) y Avance (fa-forward) -->
     
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        document.querySelectorAll('.js-player').forEach(video => {
          const controls = video.closest('.main-video')?.querySelector('.plyr__controls');
    
          if (controls && !controls.querySelector('#plyr-restart')) {
            // 1️⃣ Crear botón de Reinicio al inicio (#plyr-restart) al EXTREMO IZQUIERDO
      
            const restartBtn = document.createElement("button");
            restartBtn.className = "plyr__control";      
            restartBtn.id = "plyr-restart";     
            restartBtn.innerHTML = '<i class="fas fa-undo"></i><span class="plyr__sr-only">Reiniciar al inicio</span>';      
            restartBtn.title = "Reiniciar al inicio (0s)";   
            restartBtn.addEventListener("click", () => {
              video.currentTime = 0;
            });
      
            controls.insertBefore(restartBtn, controls.firstChild);
      
            // 2️⃣ Crear botón de Retroceso (#plyr-rewind) junto al de Reinicio
      
            const rewindBtn = document.createElement("button");
      
            rewindBtn.className = "plyr__control";
            rewindBtn.id = "plyr-rewind";
            rewindBtn.innerHTML = '<i class="fas fa-step-backward"></i><span class="plyr__sr-only">Retroceder 10 segundos</span>';
            rewindBtn.title = "Retroceder 10s";
            rewindBtn.addEventListener("click", () => {
              video.currentTime = Math.max(video.currentTime - 10, 0);
            });
      
            controls.insertBefore(rewindBtn, restartBtn.nextSibling);
      
            // 3️⃣ Crear botón de Avance (#plyr-fast-forward) estándar de Plyr
      
            const forwardBtn = document.createElement("button");
      
            forwardBtn.className = "plyr__control";
            forwardBtn.id = "plyr-fast-forward";
            forwardBtn.innerHTML = '<i class="fa fa-forward"></i><span class="plyr__sr-only">Avanzar 10 segundos</span>';
            forwardBtn.title = "Avanzar 10s";
      
            const playButton = controls.querySelector('.plyr__control[data-plyr="play"]');
            if (playButton) {
              playButton.after(forwardBtn);
            } else {
              controls.appendChild(forwardBtn);
            }
            forwardBtn.addEventListener("click", () => {
              video.currentTime = Math.min(video.currentTime + 10, video.duration);
            });
          }
        });
      });
    </script>

    <!-- Lógica para guardar posición y mostrar mensaje de reanudación por episodio -->
    
    <script>
      document.addEventListener("DOMContentLoaded", () => { 
        const mainVideo = document.querySelector('.main-video video'); 
        const resumeMsg = document.getElementById('resume-msg');
        let currentEpisode = null;
  
        // Al hacer clic en un episodio
        document.querySelectorAll('.video-list .vid').forEach(videoItem => {
          videoItem.addEventListener('click', e => {
            // Identificamos el episodio por posición en la lista
            const episodeIndex = Array.from(document.querySelectorAll('.video-list .vid')).indexOf(videoItem);
            currentEpisode = episodeIndex;
      
            // Cambiamos la fuente del video
            const src = videoItem.querySelector('video').getAttribute('src');
            mainVideo.setAttribute('src', src);

            // Checamos si existe posición guardada para este episodio
            const savedTime = localStorage.getItem(`pos_episodio_${episodeIndex}`);
            if (savedTime && parseFloat(savedTime) > 10) {
              mainVideo.currentTime = parseFloat(savedTime);
              resumeMsg.textContent = `✅ Reanudando ${videoItem.querySelector('.title').textContent.trim()} donde lo dejaste`;
              resumeMsg.classList.add('visible');
              setTimeout(() => {
                resumeMsg.classList.remove('visible');
              }, 3000);
            }
          });
        });
  
        // Guardamos posición cada 5 seg para cada episodio activo
  
        setInterval(() => {
          if (!mainVideo.paused && !mainVideo.ended && currentEpisode !== null) {
            localStorage.setItem(`pos_episodio_${currentEpisode}`, mainVideo.currentTime);
          }
        }, 5000);
      });
    </script>

    <!-- ACELERAR VIDEO -->
    <script>
      const videoList = document.querySelectorAll('.video-list .vid');
      const mainVideo = document.querySelector('.main-video video');

      videoList.forEach(videoItem => {
  
        videoItem.addEventListener('click', e => {
          videoList.forEach(v => v.classList.remove('active'));
          videoItem.classList.add('active');
    
          const videoSrc = videoItem.getAttribute('data-url');
          mainVideo.setAttribute('src', videoSrc);
          });
      });
    </script>

    <!-- partial -->

    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js'></script>
    
    <script type="text/javascript">
      let listVideo = document.querySelectorAll('.video-list .vid');
      let mainVideo = document.querySelector('.main-video video');
      let title = document.querySelector('.main-video .title');
      
      listVideo.forEach(video =>{
        video.onclick = () =>{
          listVideo.forEach(vid => vid.classList.remove('active'));
          video.classList.add('active');
          if(video.classList.contains('active')){
            let src = video.children[0].getAttribute('src');
            mainVideo.src = src;
            let text = video.children[1].innerHTML;
            title.innerHTML = text;
          };
        };
      });
    </script>
    
    <script src="https://cdn.plyr.io/3.6.12/plyr.js"></script>
    <script>//<![CDATA[
      const players = Array.from(document.querySelectorAll('.js-player')).map(player => new Plyr(player));
      //]]>
    </script>

    <script>
      const episodiosContainer = document.getElementById("episodios");
      episodiosContainer.addEventListener("wheel", (e) => {
        if (e.deltaY !== 0) {
          e.preventDefault();
          episodiosContainer.scrollBy({
            left: e.deltaY * 2, // Aumenta la sensibilidad horizontal
            behavior: "smooth"
          });
        }
      }, { passive: false });
    </script>  
    
    <script>
      const episodiosPorTemporada = JSON.parse(localStorage.getItem("episodios_temporada") || "{}");
      
      function guardarProgresoTemporada(temporada, index) {
        episodiosPorTemporada[temporada] = index;
        localStorage.setItem("episodios_temporada", JSON.stringify(episodiosPorTemporada));
      }
    
      function obtenerProgresoTemporada(temporada) {
        return episodiosPorTemporada[temporada] || 0;
      }

      // Modificar playEpisode para guardar por temporada
    
      const originalPlayEpisode = playEpisode;
      playEpisode = function(src, titulo, index) {
        guardarProgresoTemporada(temporadaSelect.value, index);
        originalPlayEpisode(src, titulo, index);
      }

      // Modificar renderEpisodios para recuperar episodio anterior por temporada
      const originalRenderEpisodios = renderEpisodios;
      renderEpisodios = function(temporada) {
        originalRenderEpisodios(temporada);
        const savedIndex = obtenerProgresoTemporada(temporada);
        const buttons = document.querySelectorAll("#episodios button");
        if (buttons[savedIndex]) {
          buttons[savedIndex].click();  // Auto reproducir
          // Scroll centrado
          setTimeout(() => {
            const scrollLeft = buttons[savedIndex].offsetLeft - (episodiosContainer.offsetWidth / 2) + (buttons[savedIndex].offsetWidth / 2);
            episodiosContainer.scrollTo({ left: scrollLeft, behavior: "smooth" });
          }, 200);
        }
      }
    </script>
    
    <script>
      const formatTime = (seconds) => {
        const m = Math.floor(seconds / 60);
        const s = Math.floor(seconds % 60);
        return m + ":" + (s < 10 ? "0" + s : s);
      };

      const originalPlayEpisode = playEpisode;
      playEpisode = function(src, titulo, index) {
        const temporada = temporadaSelect.value;
        const key = `resume_${temporada}_${index}`;
        const savedTime = parseFloat(localStorage.getItem(key));

        // Guardar episodio actual
        localStorage.setItem("ultimo_episodio", JSON.stringify({ temporada, index }));

    
        // Limpiar contenedor y crear video manualmente sin autoplay
    
        const mainVideoContainer = document.querySelector(".main-video");
        mainVideoContainer.innerHTML = "";
 
        const video = document.createElement("video");
        video.className = "js-player";
        video.setAttribute("controls", "");
        video.setAttribute("preload", "auto");
        video.setAttribute("poster", "poster.jpg"); // puedes cambiar a un poster dinámico si deseas

        const source = document.createElement("source");
        source.src = src;
        source.type = "video/mp4";  
        video.appendChild(source);

    
        const wrapper = document.createElement("div"); 
        wrapper.className = "video";
        wrapper.appendChild(video);
        mainVideoContainer.appendChild(wrapper);

        if (titleDiv) titleDiv.innerHTML = titulo;

        const buttons = document.querySelectorAll("#episodios button");
        buttons.forEach(btn => {
          btn.classList.remove("active");
          btn.style.background = "#222";
          btn.style.color = "#ccc";
        });

        buttons[index]?.classList.add("active");
        buttons[index].style.background = "red";
        buttons[index].style.color = "#fff";

        const msg = document.getElementById("resume-msg");  
        msg.textContent = `⏯ Episodio cargado en ${formatTime(savedTime || 0)}: ${titulo}`;
        msg.classList.add("visible");
        setTimeout(() => msg.classList.remove("visible"), 3000);

        // Aplicar posición guardada sin reproducir
        let retries = 0;
        const maxRetries = 20;
        const interval = setInterval(() => {
          if (video.readyState >= 1 && !isNaN(savedTime)) {
            video.currentTime = savedTime;
            clearInterval(interval);
          } else if (++retries >= maxRetries) {
            clearInterval(interval);
          }
        }, 300);

        // Guardar tiempo actual cada 5s
    
        setInterval(() => {
          if (!video.paused && !video.ended) {
            localStorage.setItem(key, video.currentTime);
          }
        }, 5000);

    
        // Reproducir siguiente episodio al finalizar
    
        video.addEventListener("ended", () => {
          video.currentTime = 0;     
          const episodios = episodiosData[temporada] || [];    
          if (index + 1 < episodios.length) {      
            const next = episodios[index + 1];      
            playEpisode(next.src, next.titulo, index + 1);    
          }  
        }, { once: true });
      };

  
      // Al cargar la página, cargar automáticamente episodio guardado sin reproducir
  
      window.addEventListener("DOMContentLoaded", () => {
    
        const ultimo = JSON.parse(localStorage.getItem("ultimo_episodio") || "{}");
        if (ultimo.temporada && typeof ultimo.index === "number") {
          const episodios = episodiosData[ultimo.temporada];
          if (episodios && episodios[ultimo.index]) {
            temporadaSelect.value = ultimo.temporada;
            renderEpisodios(ultimo.temporada);
            setTimeout(() => {
              const ep = episodios[ultimo.index];
              playEpisode(ep.src, ep.titulo, ultimo.index);
            }, 300);
          }
        }
      });
    </script>
    







    
<script>
  const originalRenderEpisodios = renderEpisodios;

  renderEpisodios = function(temporada) {
    originalRenderEpisodios(temporada);

    setTimeout(() => {
      const savedIndex = obtenerProgresoTemporada(temporada);
      const index = typeof savedIndex === "number" ? savedIndex : 0;
      const episodios = episodiosData[temporada] || [];
      const ep = episodios[index];
      if (!ep) return;

      // Mostrar el título
      const titleDiv = document.querySelector(".title");
      if (titleDiv) titleDiv.textContent = ep.titulo;

      // Limpiar el contenedor y reconstruir el reproductor
      const contenedor = document.getElementById("contenedor-video");
      contenedor.innerHTML = \`
        <video id="main-video" poster="\${ep.poster || ''}" controls>
          <source src="\${ep.src}" type="video/mp4">
          Tu navegador no soporta el elemento de video.
        </video>
      \`;

      const video = document.getElementById("main-video");
      if (!video) return;

      video.load(); // fuerza recarga del video
      video.pause();

      // Restaurar tiempo si está guardado
      const key = \`progreso_\${temporada}_\${index}\`;
      const progreso = parseFloat(localStorage.getItem(key));
      if (!isNaN(progreso)) {
        video.currentTime = progreso;
      }

      // Centrar botón del episodio activo
      const botones = document.querySelectorAll("#episodios button");
      if (botones.length > index) {
        const scrollLeft = botones[index].offsetLeft - (episodiosContainer.offsetWidth / 2) + (botones[index].offsetWidth / 2);
        episodiosContainer.scrollTo({ left: scrollLeft, behavior: "smooth" });
      }
    }, 500); // Esperamos 500ms para asegurar render del DOM
  };

  window.addEventListener("DOMContentLoaded", () => {
    const ultimo = JSON.parse(localStorage.getItem("ultimo_episodio") || "{}");
    if (ultimo.temporada && typeof ultimo.index === "number") {
      temporadaSelect.value = ultimo.temporada;
      renderEpisodios(ultimo.temporada);
    } else {
      renderEpisodios(temporadaSelect.value);
    }
  });

  temporadaSelect.addEventListener("change", () => {
    renderEpisodios(temporadaSelect.value);
  });
</script>


<script>
  window.addEventListener("DOMContentLoaded", () => {
    const ultimo = JSON.parse(localStorage.getItem("ultimo_episodio") || "{}");
    const temporada = ultimo.temporada || temporadaSelect.value;
    const index = typeof ultimo.index === "number" ? ultimo.index : obtenerProgresoTemporada(temporada);
    const episodio = (episodiosData[temporada] || [])[index];

    temporadaSelect.value = temporada;
    renderEpisodios(temporada);

    if (episodio) {
      setTimeout(() => {
        playEpisode(episodio.src, episodio.titulo, index);
      }, 300);
    }
  });

  temporadaSelect.addEventListener("change", () => {
    const temporada = temporadaSelect.value;
    renderEpisodios(temporada);
    const index = obtenerProgresoTemporada(temporada);
    const episodio = (episodiosData[temporada] || [])[index];

    if (episodio) {
      setTimeout(() => {
        playEpisode(episodio.src, episodio.titulo, index);
      }, 300);
    }
  });
</script>

</body>
</html>